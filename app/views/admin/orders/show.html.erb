<h1>注文履歴詳細</h1>
<table class="table">
	<tbody>
		<tr>
			<td>購入者</td>
			<td>
				<%= link_to admin_customers_path(@customer) do %>
							<%= @customer.last_name %><%= @customer.first_name %>
				<% end %>
			</td>
		</tr>
		<tr>
			<td>配送先</td>
			<td><%= @order.postal_code %> <%= @order.address %></td>
		</tr>
		<tr>
			<td>支払い方法</td>
			<td><%= @order.payment_method %></td>
		</tr>
		<tr>
			<td>注文ステータス</td>
			<td><%= form_with model: @order do |f| %>
                    	<%= f.select :status, Order.statuses_i18n.keys.map { |k| [Order.statuses_i18n[k], k]} %>
                    	<%= f.submit '更新'%>
            	<% end %>
			</td>
		</tr>
	</tbody>
</table>

<table class="table">
	<thead>
		<tr class="active">
			<th>商品名</th>
			<th>単価（税込）</th>
			<th>数量</th>
			<th>小計</th>
			<th>製作ステータス</th>
		</tr>
	</thead>
	<tbody>
		<% @order.order_details.each do |order_detail| %>
			<tr>
				<td><%= order_detail.item.name %></td>
				<td><%= (order_detail.item.price).to_i %></td>
				<td><%= order_detail.amount %></td>
				<td><%= (order_detail.total_price).to_i %></td>
				<td><%= form_with model: order_detail do |f| %>
	                    	<%= f.select :production_status, Order_detail.production_statuses_i18n.keys.map { |k| [Order_detail.production_statuses_i18n[k], k]} %>
	                    	<%= f.submit '更新' %>
	            	<% end %>
				</td>
			</tr>
		<% end %>
	</tbody>
</table>

<div class="pull-right">
	<table>
		<tbody>
			<tr>
				<td>商品合計</td>
				<td><%= (@order.total_price).to_i %>円</td>
			</tr>
			<tr>
				<td>送料</td>
				<td><%= @order.postage %>円</td>
			</tr>
			<tr>
				<td>請求金額合計</td>
				<td><%= @order.billing_amount %>円</td>
			</tr>
		</tbody>
	</table>
</div>